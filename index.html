<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MHSS Calculator - ML-based Hepatic Safety Score</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root { --primary:#1a365d; --primary-light:#2c5282; --accent:#3182ce; --danger:#c53030; --danger-light:#feb2b2; --success:#276749; --success-light:#9ae6b4; --warning:#c05621; --warning-light:#fbd38d; --bg:#f7fafc; --card:#fff; --text:#1a202c; --text-muted:#718096; --border:#e2e8f0; }
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'IBM Plex Sans',-apple-system,sans-serif; background:var(--bg); color:var(--text); line-height:1.6; min-height:100vh; }
        .header { background:linear-gradient(135deg,var(--primary),var(--primary-light)); color:#fff; padding:2rem 1.5rem; text-align:center; box-shadow:0 4px 20px rgba(26,54,93,0.15); }
        .header h1 { font-size:1.75rem; font-weight:600; margin-bottom:0.5rem; letter-spacing:-0.02em; }
        .header p { font-size:0.9rem; opacity:0.9; max-width:600px; margin:0 auto; }
        .privacy-badge { display:inline-flex; align-items:center; gap:0.4rem; background:rgba(255,255,255,0.15); padding:0.35rem 0.75rem; border-radius:20px; font-size:0.75rem; margin-top:1rem; }
        .container { max-width:900px; margin:0 auto; padding:1.5rem; }
        .card { background:var(--card); border-radius:12px; box-shadow:0 1px 3px rgba(0,0,0,0.08),0 4px 12px rgba(0,0,0,0.04); margin-bottom:1.5rem; overflow:hidden; }
        .card-header { background:#f8fafc; padding:1rem 1.25rem; border-bottom:1px solid var(--border); font-weight:600; font-size:0.95rem; color:var(--primary); display:flex; align-items:center; gap:0.5rem; }
        .card-body { padding:1.25rem; }
        .form-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:1rem; }
        .form-group { display:flex; flex-direction:column; }
        .form-group label { font-size:0.8rem; font-weight:500; color:var(--text-muted); margin-bottom:0.35rem; }
        .form-group label .unit { font-weight:400; color:#a0aec0; }
        .form-group input[type="number"], .form-group select { padding:0.65rem 0.85rem; border:1.5px solid var(--border); border-radius:8px; font-size:0.95rem; font-family:'IBM Plex Mono',monospace; transition:all 0.2s; background:#fff; }
        .form-group input:focus, .form-group select:focus { outline:none; border-color:var(--accent); box-shadow:0 0 0 3px rgba(49,130,206,0.15); }
        .checkbox-group { display:flex; flex-wrap:wrap; gap:0.75rem; }
        .checkbox-item { display:flex; align-items:center; gap:0.4rem; padding:0.5rem 0.85rem; background:#f7fafc; border:1.5px solid var(--border); border-radius:8px; cursor:pointer; transition:all 0.2s; font-size:0.85rem; }
        .checkbox-item:hover { border-color:var(--accent); }
        .checkbox-item input { width:16px; height:16px; accent-color:var(--accent); }
        .checkbox-item.checked { background:#ebf8ff; border-color:var(--accent); color:var(--primary); }
        .btn { display:inline-flex; align-items:center; justify-content:center; gap:0.5rem; padding:0.85rem 2rem; border:none; border-radius:8px; font-size:1rem; font-weight:600; cursor:pointer; transition:all 0.2s; font-family:inherit; }
        .btn-primary { background:linear-gradient(135deg,var(--accent),var(--primary-light)); color:#fff; box-shadow:0 2px 8px rgba(49,130,206,0.3); }
        .btn-primary:hover { transform:translateY(-1px); box-shadow:0 4px 12px rgba(49,130,206,0.4); }
        .btn-reset { background:#fff; color:var(--text-muted); border:1.5px solid var(--border); }
        .btn-reset:hover { background:#f7fafc; }
        .btn-group { display:flex; gap:0.75rem; margin-top:1.5rem; justify-content:center; }
        .results { display:none; }
        .results.show { display:block; animation:fadeIn 0.4s ease; }
        @keyframes fadeIn { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
        .score-display { text-align:center; padding:2rem; background:linear-gradient(135deg,#f8fafc,#edf2f7); border-radius:12px; margin-bottom:1.5rem; }
        .score-label { font-size:0.85rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.05em; margin-bottom:0.5rem; }
        .score-value { font-size:3.5rem; font-weight:700; font-family:'IBM Plex Mono',monospace; line-height:1.1; }
        .score-bar { height:8px; background:#e2e8f0; border-radius:4px; margin:1.25rem auto; max-width:300px; overflow:hidden; }
        .score-bar-fill { height:100%; border-radius:4px; transition:width 0.6s ease; }
        .risk-badge { display:inline-flex; align-items:center; gap:0.4rem; padding:0.6rem 1.25rem; border-radius:25px; font-weight:600; font-size:0.95rem; margin-top:0.5rem; }
        .risk-low { background:var(--success-light); color:var(--success); }
        .risk-high { background:var(--danger-light); color:var(--danger); }
        .risk-low .score-value { color:var(--success); }
        .risk-high .score-value { color:var(--danger); }
        .risk-low .score-bar-fill { background:linear-gradient(90deg,#48bb78,#38a169); }
        .risk-high .score-bar-fill { background:linear-gradient(90deg,#fc8181,#e53e3e); }
        .outcome-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:1rem; }
        .outcome-section { background:#f8fafc; border-radius:10px; padding:1rem; }
        .outcome-section h4 { font-size:0.8rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.03em; margin-bottom:0.75rem; }
        .outcome-row { display:flex; justify-content:space-between; align-items:center; padding:0.5rem 0; border-bottom:1px solid #e2e8f0; }
        .outcome-row:last-child { border-bottom:none; }
        .outcome-time { font-size:0.85rem; color:var(--text); }
        .outcome-prob { font-family:'IBM Plex Mono',monospace; font-weight:600; font-size:0.9rem; padding:0.25rem 0.6rem; border-radius:4px; }
        .prob-low { background:#c6f6d5; color:var(--success); }
        .prob-mid { background:var(--warning-light); color:var(--warning); }
        .prob-high { background:var(--danger-light); color:var(--danger); }
        .prob-os-high { background:#c6f6d5; color:var(--success); }
        .prob-os-mid { background:var(--warning-light); color:var(--warning); }
        .prob-os-low { background:var(--danger-light); color:var(--danger); }
        .interpretation { background:#fffbeb; border-left:4px solid #f6ad55; padding:1rem 1.25rem; border-radius:0 8px 8px 0; margin-top:1rem; }
        .interpretation h4 { font-size:0.85rem; color:var(--warning); margin-bottom:0.5rem; }
        .interpretation p { font-size:0.9rem; color:#744210; line-height:1.5; }
        .hr-info { background:#edf2f7; padding:0.75rem 1rem; border-radius:8px; margin-top:1rem; font-size:0.85rem; color:var(--text-muted); text-align:center; }
        .hr-info strong { color:var(--text); }
        .disclaimer { background:#fff5f5; border:1px solid #fed7d7; border-radius:8px; padding:1rem; margin-top:1rem; font-size:0.8rem; color:#c53030; }
        @media(max-width:768px) { .outcome-grid{grid-template-columns:1fr} }
        @media(max-width:640px) { .header h1{font-size:1.4rem} .form-grid{grid-template-columns:1fr 1fr} .btn-group{flex-direction:column} .btn{width:100%} .score-value{font-size:2.75rem} }
    </style>
</head>
<body>
    <div class="header">
        <h1>MHSS Calculator</h1>
        <p>Machine Learning-based Hepatic Safety Score for Predicting Portal Hypertension Risk in HCC Patients Prior to Systemic Therapy</p>
        <div class="privacy-badge">üîí All calculations performed locally ‚Äî No data transmitted</div>
    </div>
    <div class="container">
        <div class="card">
            <div class="card-header">üë§ Patient Information</div>
            <div class="card-body">
                <div class="form-grid">
                    <div class="form-group"><label>Sex</label><select id="male"><option value="1">Male</option><option value="0">Female</option></select></div>
                    <div class="form-group"><label>Age <span class="unit">(years)</span></label><input type="number" id="age" min="18" max="100" step="1" placeholder="e.g., 65"></div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">üìä Tumor Characteristics</div>
            <div class="card-body">
                <div class="form-grid" style="margin-bottom:1rem;">
                    <div class="form-group"><label>Largest Intrahepatic Tumor Size <span class="unit">(cm)</span></label><input type="number" id="largest_size" min="0" max="30" step="0.1" placeholder="e.g., 5.0"></div>
                </div>
                <div class="checkbox-group">
                    <label class="checkbox-item"><input type="checkbox" id="PVT" onchange="this.parentElement.classList.toggle('checked',this.checked)"> Portal Vein Thrombosis</label>
                    <label class="checkbox-item"><input type="checkbox" id="EHS" onchange="this.parentElement.classList.toggle('checked',this.checked)"> Extrahepatic Spread</label>
                    <label class="checkbox-item"><input type="checkbox" id="multiple" onchange="this.parentElement.classList.toggle('checked',this.checked)"> Multiple Intrahepatic Tumors</label>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">ü¶† Etiology</div>
            <div class="card-body">
                <div class="checkbox-group">
                    <label class="checkbox-item"><input type="checkbox" id="HBV" onchange="this.parentElement.classList.toggle('checked',this.checked)"> Hepatitis B</label>
                    <label class="checkbox-item"><input type="checkbox" id="HCV" onchange="this.parentElement.classList.toggle('checked',this.checked)"> Hepatitis C</label>
                    <label class="checkbox-item"><input type="checkbox" id="Alc" onchange="this.parentElement.classList.toggle('checked',this.checked)"> Alcohol</label>
                    <label class="checkbox-item"><input type="checkbox" id="MASLD" onchange="this.parentElement.classList.toggle('checked',this.checked)"> MASLD/Other causes</label>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">üß™ Laboratory Values</div>
            <div class="card-body">
                <div class="form-grid">
                    <div class="form-group"><label>AST <span class="unit">(U/L)</span></label><input type="number" id="AST" min="1" max="2000" step="1" placeholder="e.g., 45"></div>
                    <div class="form-group"><label>ALT <span class="unit">(U/L)</span></label><input type="number" id="ALT" min="1" max="2000" step="1" placeholder="e.g., 35"></div>
                    <div class="form-group"><label>Total Bilirubin <span class="unit">(mg/dL)</span></label><input type="number" id="TB" min="0.1" max="30" step="0.01" placeholder="e.g., 1.2"></div>
                    <div class="form-group"><label>Albumin <span class="unit">(g/dL)</span></label><input type="number" id="Alb" min="1" max="6" step="0.1" placeholder="e.g., 3.5"></div>
                    <div class="form-group"><label>Platelet <span class="unit">(√ó10¬≥/ŒºL)</span></label><input type="number" id="PLT" min="10" max="1000" step="1" placeholder="e.g., 150"></div>
                    <div class="form-group"><label>INR</label><input type="number" id="INR" min="0.5" max="5" step="0.01" placeholder="e.g., 1.15"></div>
                    <div class="form-group"><label>AFP <span class="unit">(ng/mL)</span></label><input type="number" id="AFP" min="0" max="100000" step="0.1" placeholder="e.g., 100"></div>
                    <div class="form-group"><label>PIVKA-II <span class="unit">(mAU/mL)</span></label><input type="number" id="PIVKA" min="0" max="100000" step="0.1" placeholder="e.g., 500"></div>
                </div>
            </div>
        </div>
        <div class="btn-group">
            <button class="btn btn-primary" onclick="calculateMHSS()">üìà Calculate MHSS</button>
            <button class="btn btn-reset" onclick="resetForm()">üîÑ Reset</button>
        </div>
        <div class="results" id="results">
            <div class="card">
                <div class="card-header">‚úÖ MHSS Result</div>
                <div class="card-body">
                    <div class="score-display" id="score-display">
                        <div class="score-label">MHSS Score</div>
                        <div class="score-value" id="score-value">‚Äî</div>
                        <div class="score-bar"><div class="score-bar-fill" id="score-bar-fill" style="width:0%"></div></div>
                        <div class="risk-badge" id="risk-badge">‚Äî</div>
                    </div>
                    <div class="hr-info" id="hr-info"></div>
                    <div class="outcome-grid">
                        <div class="outcome-section">
                            <h4>üè• Hepatic Decompensation</h4>
                            <div class="outcome-row"><span class="outcome-time">3 months</span><span class="outcome-prob" id="decom-3m">‚Äî</span></div>
                            <div class="outcome-row"><span class="outcome-time">6 months</span><span class="outcome-prob" id="decom-6m">‚Äî</span></div>
                            <div class="outcome-row"><span class="outcome-time">12 months</span><span class="outcome-prob" id="decom-12m">‚Äî</span></div>
                        </div>
                        <div class="outcome-section">
                            <h4>ü©∏ Variceal Bleeding</h4>
                            <div class="outcome-row"><span class="outcome-time">3 months</span><span class="outcome-prob" id="varix-3m">‚Äî</span></div>
                            <div class="outcome-row"><span class="outcome-time">6 months</span><span class="outcome-prob" id="varix-6m">‚Äî</span></div>
                            <div class="outcome-row"><span class="outcome-time">12 months</span><span class="outcome-prob" id="varix-12m">‚Äî</span></div>
                        </div>
                        <div class="outcome-section">
                            <h4>üíö Overall Survival</h4>
                            <div class="outcome-row"><span class="outcome-time">3 months</span><span class="outcome-prob" id="os-3m">‚Äî</span></div>
                            <div class="outcome-row"><span class="outcome-time">6 months</span><span class="outcome-prob" id="os-6m">‚Äî</span></div>
                            <div class="outcome-row"><span class="outcome-time">12 months</span><span class="outcome-prob" id="os-12m">‚Äî</span></div>
                        </div>
                    </div>
                    <div class="interpretation"><h4>Clinical Interpretation</h4><p id="interpretation-text"></p></div>
                </div>
            </div>
            <div class="disclaimer"><strong>‚ö†Ô∏è Disclaimer:</strong> This calculator is for research and educational purposes only. Clinical decisions should be made by qualified healthcare professionals. This tool should not replace clinical judgment.</div>
        </div>
    </div>
<script>
const MODEL = {"optimal_threshold":0.72,"outcome_probabilities":{"low":{"3m_decom":0.086,"6m_decom":0.182,"12m_decom":0.324,"3m_varix":0.0186,"6m_varix":0.0422,"12m_varix":0.0876,"3m_os":0.8899,"6m_os":0.7553,"12m_os":0.5283},"high":{"3m_decom":0.425,"6m_decom":0.58,"12m_decom":0.732,"3m_varix":0.1195,"6m_varix":0.1678,"12m_varix":0.2846,"3m_os":0.6985,"6m_os":0.4827,"12m_os":0.265}},"trees":[{"feature":[13,3,1,-2,-2,5,-2,-2,15,4,-2,-2,-2],"threshold":[3.8950001001358032,0.5,63.5,-2.0,-2.0,0.5,-2.0,-2.0,1.1050000190734863,4.25,-2.0,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,-1],"value":[[[0.2765451664025357,0.7234548335974643]],[[0.18580375782881003,0.81419624217119]],[[0.09322033898305085,0.9067796610169492]],[[0.05365853658536585,0.9463414634146341]],[[0.1476510067114094,0.8523489932885906]],[[0.24006622516556292,0.7599337748344371]],[[0.25133689839572193,0.7486631016042781]],[[0.23501199040767387,0.7649880095923262]],[[0.5625,0.4375]],[[0.694300518134715,0.30569948186528495]],[[0.8222222222222222,0.17777777777777778]],[[0.5825242718446602,0.4174757281553398]],[[0.3333333333333333,0.6666666666666666]]]},{"feature":[2,12,17,-2,-2,11,-2,-2,13,13,-2,-2,12,-2,-2],"threshold":[0.5,0.7699999809265137,1415.0,-2.0,-2.0,32.5,-2.0,-2.0,3.715000033378601,2.915000081062317,-2.0,-2.0,0.7899999916553497,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.28288431061806657,0.7171156893819335]],[[0.4791666666666667,0.5208333333333334]],[[0.6652173913043479,0.3347826086956522]],[[0.782312925170068,0.21768707482993196]],[[0.4578313253012048,0.5421686746987951]],[[0.26732673267326734,0.7326732673267327]],[[0.21739130434782608,0.782608695652174]],[[0.3333333333333333,0.6666666666666666]],[[0.18072289156626506,0.8192771084337349]],[[0.10845295055821372,0.8915470494417863]],[[0.045714285714285714,0.9542857142857143]],[[0.13274336283185842,0.8672566371681416]],[[0.4039408866995074,0.5960591133004927]],[[0.6043956043956044,0.3956043956043956]],[[0.24107142857142858,0.7589285714285714]]]},{"feature":[13,12,10,-2,-2,5,-2,-2,15,2,-2,-2,-2],"threshold":[3.774999976158142,1.0750000476837158,46.5,-2.0,-2.0,0.5,-2.0,-2.0,1.1349999904632568,0.5,-2.0,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,-1],"value":[[[0.294770206022187,0.705229793977813]],[[0.1976878612716763,0.8023121387283237]],[[0.34986945169712796,0.6501305483028721]],[[0.5263157894736842,0.47368421052631576]],[[0.256,0.744]],[[0.07676348547717843,0.9232365145228216]],[[0.0,1.0]],[[0.10422535211267606,0.895774647887324]],[[0.5062972292191436,0.49370277078085645]],[[0.6194029850746269,0.3805970149253731]],[[0.7557251908396947,0.24427480916030533]],[[0.48905109489051096,0.5109489051094891]],[[0.2713178294573643,0.7286821705426356]]]},{"feature":[12,4,15,-2,-2,13,-2,-2,13,6,-2,-2,-2],"threshold":[1.2300000190734863,6.549999952316284,1.1150000095367432,-2.0,-2.0,3.784999966621399,-2.0,-2.0,3.774999976158142,0.5,-2.0,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,-1],"value":[[[0.29635499207606975,0.7036450079239303]],[[0.43989431968295906,0.560105680317041]],[[0.6067708333333334,0.3932291666666667]],[[0.7215686274509804,0.2784313725490196]],[[0.3798449612403101,0.6201550387596899]],[[0.2680965147453083,0.7319034852546917]],[[0.19262295081967212,0.8073770491803278]],[[0.4108527131782946,0.5891472868217055]],[[0.08118811881188119,0.9188118811881189]],[[0.060240963855421686,0.9397590361445783]],[[0.12389380530973451,0.8761061946902655]],[[0.03642384105960265,0.9635761589403974]],[[0.17777777777777778,0.8222222222222222]]]},{"feature":[2,16,-2,14,-2,-2,12,10,-2,-2,1,-2,-2],"threshold":[0.5,4.75,-2.0,128.5,-2.0,-2.0,0.7350000143051147,55.0,-2.0,-2.0,58.5,-2.0,-2.0],"children_left":[1,2,-1,4,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,3,-1,5,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.2908082408874802,0.7091917591125199]],[[0.47058823529411764,0.5294117647058824]],[[0.6976744186046512,0.3023255813953488]],[[0.4157303370786517,0.5842696629213483]],[[0.24603174603174602,0.753968253968254]],[[0.508695652173913,0.49130434782608695]],[[0.19390243902439025,0.8060975609756098]],[[0.43478260869565216,0.5652173913043478]],[[0.5263157894736842,0.47368421052631576]],[[0.33707865168539325,0.6629213483146067]],[[0.12421383647798742,0.8757861635220126]],[[0.041811846689895474,0.9581881533101045]],[[0.19197707736389685,0.8080229226361032]]]},{"feature":[15,10,5,-2,-2,12,-2,-2,17,12,-2,-2,10,-2,-2],"threshold":[1.1050000190734863,43.5,0.5,-2.0,-2.0,1.1649999618530273,-2.0,-2.0,159.27000427246094,1.125,-2.0,-2.0,50.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.3019017432646593,0.6980982567353408]],[[0.5269978401727862,0.47300215982721383]],[[0.7918781725888325,0.20812182741116753]],[[0.7045454545454546,0.29545454545454547]],[[0.8623853211009175,0.13761467889908258]],[[0.3308270676691729,0.6691729323308271]],[[0.4235294117647059,0.5764705882352941]],[[0.16666666666666666,0.8333333333333334]],[[0.17146433041301626,0.8285356695869838]],[[0.281437125748503,0.718562874251497]],[[0.4625,0.5375]],[[0.11494252873563218,0.8850574712643678]],[[0.14240506329113925,0.8575949367088608]],[[0.24031007751937986,0.7596899224806202]],[[0.1172962226640159,0.882703777335984]]]},{"feature":[10,14,-2,-2,15,4,-2,-2,2,-2,-2],"threshold":[36.5,148.0,-2.0,-2.0,1.1050000190734863,5.450000047683716,-2.0,-2.0,0.5,-2.0,-2.0],"children_left":[1,2,-1,-1,5,6,-1,-1,9,-1,-1],"children_right":[4,3,-1,-1,8,7,-1,-1,10,-1,-1],"value":[[[0.27099841521394613,0.7290015847860539]],[[0.6213991769547325,0.3786008230452675]],[[0.4752475247524752,0.5247524752475248]],[[0.7253521126760564,0.2746478873239437]],[[0.1874386653581943,0.8125613346418057]],[[0.34915254237288135,0.6508474576271186]],[[0.5977011494252874,0.40229885057471265]],[[0.24519230769230768,0.7548076923076923]],[[0.12154696132596685,0.8784530386740331]],[[0.19879518072289157,0.8012048192771084]],[[0.0985663082437276,0.9014336917562724]]]},{"feature":[12,13,15,-2,-2,4,-2,-2,13,14,-2,-2,10,-2,-2],"threshold":[0.7350000143051147,3.784999966621399,1.1150000095367432,-2.0,-2.0,2.399999976158142,-2.0,-2.0,3.4850000143051147,144.0,-2.0,-2.0,51.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.277337559429477,0.722662440570523]],[[0.5530864197530864,0.4469135802469136]],[[0.3838383838383838,0.6161616161616161]],[[0.4782608695652174,0.5217391304347826]],[[0.25301204819277107,0.7469879518072289]],[[0.714975845410628,0.28502415458937197]],[[0.8658536585365854,0.13414634146341464]],[[0.616,0.384]],[[0.147024504084014,0.852975495915986]],[[0.07676767676767676,0.9232323232323232]],[[0.04693140794223827,0.9530685920577617]],[[0.11467889908256881,0.8853211009174312]],[[0.2430939226519337,0.7569060773480663]],[[0.3942307692307692,0.6057692307692307]],[[0.1821705426356589,0.8178294573643411]]]},{"feature":[2,16,-2,11,-2,-2,10,-2,5,-2,-2],"threshold":[0.5,5.125,-2.0,44.5,-2.0,-2.0,36.5,-2.0,0.5,-2.0,-2.0],"children_left":[1,2,-1,4,-1,-1,7,-1,9,-1,-1],"children_right":[6,3,-1,5,-1,-1,8,-1,10,-1,-1],"value":[[[0.2979397781299525,0.7020602218700476]],[[0.49047619047619045,0.5095238095238095]],[[0.7553191489361702,0.24468085106382978]],[[0.41411042944785276,0.5858895705521472]],[[0.5043478260869565,0.4956521739130435]],[[0.19791666666666666,0.8020833333333334]],[[0.20190023752969122,0.7980997624703088]],[[0.5217391304347826,0.4782608695652174]],[[0.17335058214747737,0.8266494178525227]],[[0.09130434782608696,0.908695652173913]],[[0.20810313075506445,0.7918968692449355]]]},{"feature":[15,14,-2,2,-2,-2,12,4,-2,-2,1,-2,-2],"threshold":[1.1050000190734863,129.5,-2.0,0.5,-2.0,-2.0,1.0049999952316284,9.849999904632568,-2.0,-2.0,55.5,-2.0,-2.0],"children_left":[1,2,-1,4,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,3,-1,5,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.2757527733755943,0.7242472266244057]],[[0.4851063829787234,0.5148936170212766]],[[0.29457364341085274,0.7054263565891473]],[[0.5571847507331378,0.44281524926686217]],[[0.7100591715976331,0.28994082840236685]],[[0.4069767441860465,0.5930232558139535]],[[0.15151515151515152,0.8484848484848485]],[[0.2682926829268293,0.7317073170731707]],[[0.3902439024390244,0.6097560975609756]],[[0.10569105691056911,0.8943089430894309]],[[0.08514851485148515,0.9148514851485149]],[[0.04093567251461988,0.9590643274853801]],[[0.10778443113772455,0.8922155688622755]]]},{"feature":[12,13,10,-2,-2,-2,15,17,-2,-2,14,-2,-2],"threshold":[0.7350000143051147,3.950000047683716,46.5,-2.0,-2.0,-2.0,1.1050000190734863,4149.550048828125,-2.0,-2.0,144.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,5,4,-1,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.2884310618066561,0.7115689381933439]],[[0.5400516795865633,0.4599483204134367]],[[0.4186046511627907,0.5813953488372093]],[[0.5785123966942148,0.4214876033057851]],[[0.2773722627737226,0.7226277372262774]],[[0.7829457364341085,0.21705426356589147]],[[0.17714285714285713,0.8228571428571428]],[[0.32,0.68]],[[0.44,0.56]],[[0.2,0.8]],[[0.12,0.88]],[[0.08042895442359249,0.9195710455764075]],[[0.17857142857142858,0.8214285714285714]]]},{"feature":[2,13,12,-2,-2,-2,16,4,-2,-2,13,-2,-2],"threshold":[0.5,3.930000066757202,1.0499999523162842,-2.0,-2.0,-2.0,1575.0,5.049999952316284,-2.0,-2.0,3.75,-2.0,-2.0],"children_left":[1,2,3,-1,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,5,4,-1,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.28922345483359746,0.7107765451664025]],[[0.4568764568764569,0.5431235431235432]],[[0.335423197492163,0.664576802507837]],[[0.4519230769230769,0.5480769230769231]],[[0.11711711711711711,0.8828828828828829]],[[0.8090909090909091,0.19090909090909092]],[[0.2028811524609844,0.7971188475390156]],[[0.2556390977443609,0.7443609022556391]],[[0.43119266055045874,0.5688073394495413]],[[0.1896551724137931,0.8103448275862069]],[[0.1543778801843318,0.8456221198156681]],[[0.08529411764705883,0.9147058823529411]],[[0.40425531914893614,0.5957446808510638]]]},{"feature":[4,12,1,-2,-2,-2,14,13,-2,-2,10,-2,-2],"threshold":[3.350000023841858,0.9200000166893005,65.5,-2.0,-2.0,-2.0,156.5,3.784999966621399,-2.0,-2.0,85.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,5,4,-1,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.27496038034865294,0.7250396196513471]],[[0.5177865612648221,0.48221343873517786]],[[0.6993865030674846,0.3006134969325153]],[[0.6162790697674418,0.38372093023255816]],[[0.7922077922077922,0.2077922077922078]],[[0.18888888888888888,0.8111111111111111]],[[0.21407333994053518,0.7859266600594648]],[[0.1422924901185771,0.857707509881423]],[[0.07788944723618091,0.9221105527638191]],[[0.37962962962962965,0.6203703703703703]],[[0.28628230616302186,0.7137176938369781]],[[0.39080459770114945,0.6091954022988506]],[[0.17355371900826447,0.8264462809917356]]]},{"feature":[10,4,-2,-2,2,13,-2,-2,13,-2,-2],"threshold":[29.5,2.8000000715255737,-2.0,-2.0,0.5,3.3700000047683716,-2.0,-2.0,3.715000033378601,-2.0,-2.0],"children_left":[1,2,-1,-1,5,6,-1,-1,9,-1,-1],"children_right":[4,3,-1,-1,8,7,-1,-1,10,-1,-1],"value":[[[0.27892234548335976,0.7210776545166403]],[[0.68125,0.31875]],[[0.7974683544303798,0.20253164556962025]],[[0.5679012345679012,0.43209876543209874]],[[0.22050816696914702,0.779491833030853]],[[0.3291139240506329,0.6708860759493671]],[[0.04672897196261682,0.9532710280373832]],[[0.47368421052631576,0.5263157894736842]],[[0.17684478371501272,0.8231552162849872]],[[0.11166666666666666,0.8883333333333333]],[[0.3870967741935484,0.6129032258064516]]]},{"feature":[10,12,15,-2,-2,-2,14,12,-2,-2,12,-2,-2],"threshold":[46.5,0.9749999940395355,1.1150000095367432,-2.0,-2.0,-2.0,147.5,0.8199999928474426,-2.0,-2.0,1.1349999904632568,-2.0,-2.0],"children_left":[1,2,3,-1,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,5,4,-1,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.26386687797147385,0.7361331220285261]],[[0.5051020408163265,0.49489795918367346]],[[0.6013513513513513,0.39864864864864863]],[[0.7027027027027027,0.2972972972972973]],[[0.43243243243243246,0.5675675675675675]],[[0.20833333333333334,0.7916666666666666]],[[0.15517241379310345,0.8448275862068966]],[[0.08237986270022883,0.9176201372997712]],[[0.2087912087912088,0.7912087912087912]],[[0.049132947976878616,0.9508670520231214]],[[0.22863741339491916,0.7713625866050808]],[[0.34375,0.65625]],[[0.10526315789473684,0.8947368421052632]]]},{"feature":[10,15,4,-2,-2,13,-2,-2,4,-2,15,-2,-2],"threshold":[50.5,1.1150000095367432,4.299999952316284,-2.0,-2.0,3.3049999475479126,-2.0,-2.0,4.549999952316284,-2.0,1.1449999809265137,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,-1,11,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,10,-1,12,-1,-1],"value":[[[0.28129952456418383,0.7187004754358162]],[[0.5065217391304347,0.4934782608695652]],[[0.6600790513833992,0.33992094861660077]],[[0.8308823529411765,0.16911764705882354]],[[0.46153846153846156,0.5384615384615384]],[[0.3188405797101449,0.6811594202898551]],[[0.25773195876288657,0.7422680412371134]],[[0.37272727272727274,0.6272727272727273]],[[0.15211970074812967,0.8478802992518704]],[[0.2897196261682243,0.7102803738317757]],[[0.13093525179856116,0.8690647482014389]],[[0.21052631578947367,0.7894736842105263]],[[0.08158508158508158,0.9184149184149184]]]},{"feature":[2,15,17,-2,-2,14,-2,-2,15,13,-2,-2,13,-2,-2],"threshold":[0.5,1.1150000095367432,1519.219970703125,-2.0,-2.0,144.5,-2.0,-2.0,1.1050000190734863,3.715000033378601,-2.0,-2.0,2.890000104904175,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.26782884310618066,0.7321711568938193]],[[0.477326968973747,0.522673031026253]],[[0.6839622641509434,0.3160377358490566]],[[0.75,0.25]],[[0.5833333333333334,0.4166666666666667]],[[0.26570048309178745,0.7342995169082126]],[[0.1896551724137931,0.8103448275862069]],[[0.3626373626373626,0.6373626373626373]],[[0.16370106761565836,0.8362989323843416]],[[0.3389830508474576,0.6610169491525424]],[[0.1590909090909091,0.8409090909090909]],[[0.5673076923076923,0.4326923076923077]],[[0.09555189456342669,0.9044481054365733]],[[0.027586206896551724,0.9724137931034482]],[[0.11688311688311688,0.8831168831168831]]]},{"feature":[13,16,-2,10,-2,-2,16,-2,10,-2,-2],"threshold":[3.774999976158142,8.025000095367432,-2.0,47.5,-2.0,-2.0,21.335000038146973,-2.0,59.0,-2.0,-2.0],"children_left":[1,2,-1,4,-1,-1,7,-1,9,-1,-1],"children_right":[6,3,-1,5,-1,-1,8,-1,10,-1,-1],"value":[[[0.2844690966719493,0.7155309033280507]],[[0.17222222222222222,0.8277777777777777]],[[0.31092436974789917,0.6890756302521008]],[[0.15108834827144688,0.8489116517285531]],[[0.2765957446808511,0.723404255319149]],[[0.11129848229342328,0.8887015177065767]],[[0.56353591160221,0.43646408839779005]],[[0.773109243697479,0.226890756302521]],[[0.4609053497942387,0.5390946502057613]],[[0.6422764227642277,0.35772357723577236]],[[0.275,0.725]]]},{"feature":[15,10,14,-2,-2,1,-2,-2,10,12,-2,-2,5,-2,-2],"threshold":[1.1050000190734863,54.0,139.5,-2.0,-2.0,63.5,-2.0,-2.0,46.5,0.9199999868869781,-2.0,-2.0,0.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.2900158478605388,0.7099841521394612]],[[0.5171717171717172,0.48282828282828283]],[[0.7038461538461539,0.29615384615384616]],[[0.5316455696202531,0.46835443037974683]],[[0.7790055248618785,0.22099447513812154]],[[0.31063829787234043,0.6893617021276596]],[[0.2366412213740458,0.7633587786259542]],[[0.40384615384615385,0.5961538461538461]],[[0.14341590612777053,0.8565840938722294]],[[0.3273809523809524,0.6726190476190477]],[[0.5172413793103449,0.4827586206896552]],[[0.12345679012345678,0.8765432098765432]],[[0.09181969949916527,0.9081803005008348]],[[0.028409090909090908,0.9715909090909091]],[[0.1182033096926714,0.8817966903073287]]]},{"feature":[12,4,3,-2,-2,13,-2,-2,1,5,-2,-2,10,-2,-2],"threshold":[0.9650000035762787,9.400000095367432,0.5,-2.0,-2.0,3.5649999380111694,-2.0,-2.0,65.5,0.5,-2.0,-2.0,67.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.27099841521394613,0.7290015847860539]],[[0.453125,0.546875]],[[0.5615384615384615,0.43846153846153846]],[[0.3333333333333333,0.6666666666666666]],[[0.6666666666666666,0.3333333333333333]],[[0.22580645161290322,0.7741935483870968]],[[0.10112359550561797,0.898876404494382]],[[0.3402061855670103,0.6597938144329897]],[[0.11807580174927114,0.8819241982507289]],[[0.07628865979381444,0.9237113402061856]],[[0.0072992700729927005,0.9927007299270073]],[[0.10344827586206896,0.896551724137931]],[[0.21890547263681592,0.7810945273631841]],[[0.336734693877551,0.6632653061224489]],[[0.10679611650485436,0.8932038834951457]]]},{"feature":[2,11,14,-2,-2,-2,15,10,-2,-2,12,-2,-2],"threshold":[0.5,45.5,129.0,-2.0,-2.0,-2.0,1.1549999713897705,68.0,-2.0,-2.0,0.8849999904632568,-2.0,-2.0],"children_left":[1,2,3,-1,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,5,4,-1,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.2805071315372425,0.7194928684627575]],[[0.4955947136563877,0.5044052863436124]],[[0.5555555555555556,0.4444444444444444]],[[0.3643410852713178,0.6356589147286822]],[[0.6764705882352942,0.3235294117647059]],[[0.3305785123966942,0.6694214876033058]],[[0.15965346534653466,0.8403465346534653]],[[0.24664879356568364,0.7533512064343163]],[[0.3973509933774834,0.6026490066225165]],[[0.14414414414414414,0.8558558558558559]],[[0.08505747126436781,0.9149425287356322]],[[0.2857142857142857,0.7142857142857143]],[[0.04189944134078212,0.9581005586592178]]]},{"feature":[4,11,-2,-2,2,17,-2,-2,15,-2,-2],"threshold":[2.649999976158142,22.5,-2.0,-2.0,0.5,1239.0,-2.0,-2.0,1.0950000286102295,-2.0,-2.0],"children_left":[1,2,-1,-1,5,6,-1,-1,9,-1,-1],"children_right":[4,3,-1,-1,8,7,-1,-1,10,-1,-1],"value":[[[0.2662440570522979,0.7337559429477021]],[[0.5436893203883495,0.4563106796116505]],[[0.6736842105263158,0.3263157894736842]],[[0.43243243243243246,0.5675675675675675]],[[0.21212121212121213,0.7878787878787878]],[[0.3723404255319149,0.6276595744680851]],[[0.49612403100775193,0.5038759689922481]],[[0.2679738562091503,0.7320261437908496]],[[0.15374677002583978,0.8462532299741602]],[[0.32160804020100503,0.678391959798995]],[[0.09565217391304348,0.9043478260869565]]]},{"feature":[10,5,-2,-2,13,15,-2,-2,12,-2,-2],"threshold":[36.5,0.5,-2.0,-2.0,3.475000023841858,1.1449999809265137,-2.0,-2.0,1.0850000381469727,-2.0,-2.0],"children_left":[1,2,-1,-1,5,6,-1,-1,9,-1,-1],"children_right":[4,3,-1,-1,8,7,-1,-1,10,-1,-1],"value":[[[0.27892234548335976,0.7210776545166403]],[[0.6374501992031872,0.36254980079681276]],[[0.5376344086021505,0.46236559139784944]],[[0.6962025316455697,0.3037974683544304]],[[0.18991097922848665,0.8100890207715133]],[[0.10488245931283906,0.895117540687161]],[[0.24025974025974026,0.7597402597402597]],[[0.05263157894736842,0.9473684210526315]],[[0.2925764192139738,0.7074235807860262]],[[0.4095940959409594,0.5904059040590406]],[[0.12299465240641712,0.8770053475935828]]]},{"feature":[4,2,15,-2,-2,12,-2,-2,12,10,-2,-2,14,-2,-2],"threshold":[5.950000047683716,0.5,1.1150000095367432,-2.0,-2.0,1.284999966621399,-2.0,-2.0,0.7150000035762787,54.5,-2.0,-2.0,160.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.294770206022187,0.705229793977813]],[[0.48427672955974843,0.5157232704402516]],[[0.589041095890411,0.410958904109589]],[[0.807909604519774,0.192090395480226]],[[0.25217391304347825,0.7478260869565218]],[[0.31891891891891894,0.6810810810810811]],[[0.49038461538461536,0.5096153846153846]],[[0.09876543209876543,0.9012345679012346]],[[0.17961783439490445,0.8203821656050956]],[[0.3675675675675676,0.6324324324324324]],[[0.5555555555555556,0.4444444444444444]],[[0.24778761061946902,0.7522123893805309]],[[0.12166666666666667,0.8783333333333333]],[[0.07142857142857142,0.9285714285714286]],[[0.1856060606060606,0.8143939393939394]]]},{"feature":[10,2,10,-2,-2,-2,10,14,-2,-2,1,-2,-2],"threshold":[46.5,0.5,34.5,-2.0,-2.0,-2.0,83.5,83.5,-2.0,-2.0,52.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,5,4,-1,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.27892234548335976,0.7210776545166403]],[[0.5362694300518135,0.4637305699481865]],[[0.6234309623430963,0.37656903765690375]],[[0.7307692307692307,0.2692307692307692]],[[0.42168674698795183,0.5783132530120482]],[[0.3945578231292517,0.6054421768707483]],[[0.16552511415525115,0.8344748858447488]],[[0.24431818181818182,0.7556818181818182]],[[0.04054054054054054,0.9594594594594594]],[[0.29856115107913667,0.7014388489208633]],[[0.11259541984732824,0.8874045801526718]],[[0.051094890510948905,0.948905109489051]],[[0.1343669250645995,0.8656330749354005]]]},{"feature":[15,16,-2,11,-2,-2,13,13,-2,-2,-2],"threshold":[1.125,11.505000114440918,-2.0,44.5,-2.0,-2.0,3.8950001001358032,3.09499990940094,-2.0,-2.0,-2.0],"children_left":[1,2,-1,4,-1,-1,7,8,-1,-1,-1],"children_right":[6,3,-1,5,-1,-1,10,9,-1,-1,-1],"value":[[[0.29160063391442154,0.7083993660855784]],[[0.477859778597786,0.522140221402214]],[[0.6644295302013423,0.33557046979865773]],[[0.4071246819338422,0.5928753180661578]],[[0.5,0.5]],[[0.22556390977443608,0.7744360902255639]],[[0.15138888888888888,0.8486111111111111]],[[0.11330049261083744,0.8866995073891626]],[[0.056179775280898875,0.9438202247191011]],[[0.15789473684210525,0.8421052631578947]],[[0.36036036036036034,0.6396396396396397]]]},{"feature":[1,12,13,-2,-2,16,-2,-2,-2],"threshold":[78.5,0.9650000035762787,3.90500009059906,-2.0,-2.0,9.025000095367432,-2.0,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,-1],"value":[[[0.25990491283676703,0.7400950871632329]],[[0.23367697594501718,0.7663230240549829]],[[0.41453831041257366,0.5854616895874263]],[[0.2972972972972973,0.7027027027027027]],[[0.6363636363636364,0.36363636363636365]],[[0.09312977099236641,0.9068702290076336]],[[0.17333333333333334,0.8266666666666667]],[[0.08275862068965517,0.9172413793103448]],[[0.5714285714285714,0.42857142857142855]]]},{"feature":[13,2,-2,1,-2,-2,13,15,-2,-2,15,-2,-2],"threshold":[3.4950000047683716,0.5,-2.0,63.5,-2.0,-2.0,3.915000081062317,1.1050000190734863,-2.0,-2.0,1.1150000095367432,-2.0,-2.0],"children_left":[1,2,-1,4,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,3,-1,5,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.27099841521394613,0.7290015847860539]],[[0.11900826446280992,0.8809917355371901]],[[0.2781456953642384,0.7218543046357616]],[[0.06607929515418502,0.933920704845815]],[[0.038338658146964855,0.9616613418530351]],[[0.1276595744680851,0.8723404255319149]],[[0.410958904109589,0.589041095890411]],[[0.3261390887290168,0.6738609112709832]],[[0.4678362573099415,0.5321637426900585]],[[0.22764227642276422,0.7723577235772358]],[[0.5583333333333333,0.44166666666666665]],[[0.6815286624203821,0.3184713375796178]],[[0.3253012048192771,0.6746987951807228]]]},{"feature":[15,4,16,-2,-2,10,-2,-2,2,12,-2,-2,5,-2,-2],"threshold":[1.1050000190734863,5.599999904632568,37.54999923706055,-2.0,-2.0,49.5,-2.0,-2.0,0.5,0.9050000011920929,-2.0,-2.0,0.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.28526148969889065,0.7147385103011094]],[[0.4874476987447699,0.5125523012552301]],[[0.7142857142857143,0.2857142857142857]],[[0.7974683544303798,0.20253164556962025]],[[0.6458333333333334,0.3541666666666667]],[[0.3564356435643564,0.6435643564356436]],[[0.691358024691358,0.30864197530864196]],[[0.23423423423423423,0.7657657657657657]],[[0.16198979591836735,0.8380102040816326]],[[0.315,0.685]],[[0.5092592592592593,0.49074074074074076]],[[0.08695652173913043,0.9130434782608695]],[[0.1095890410958904,0.8904109589041096]],[[0.028901734104046242,0.9710982658959537]],[[0.1435523114355231,0.8564476885644768]]]},{"feature":[10,12,13,-2,-2,-2,12,13,-2,-2,12,-2,-2],"threshold":[36.5,0.7750000059604645,3.950000047683716,-2.0,-2.0,-2.0,1.274999976158142,3.665000081062317,-2.0,-2.0,1.965000033378601,-2.0,-2.0],"children_left":[1,2,3,-1,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,5,4,-1,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.2694136291600634,0.7305863708399366]],[[0.6006944444444444,0.3993055555555556]],[[0.7171717171717171,0.2828282828282828]],[[0.59,0.41]],[[0.8469387755102041,0.15306122448979592]],[[0.34444444444444444,0.6555555555555556]],[[0.17145790554414783,0.8285420944558521]],[[0.2846153846153846,0.7153846153846154]],[[0.18729096989966554,0.8127090301003345]],[[0.416289592760181,0.583710407239819]],[[0.04185022026431718,0.9581497797356828]],[[0.027131782945736434,0.9728682170542635]],[[0.061224489795918366,0.9387755102040817]]]},{"feature":[10,12,17,-2,-2,-2,13,10,-2,-2,10,-2,-2],"threshold":[36.5,0.7800000011920929,159.55999755859375,-2.0,-2.0,-2.0,3.4200000762939453,75.5,-2.0,-2.0,109.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,5,4,-1,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.2583201267828843,0.7416798732171157]],[[0.6016949152542372,0.3983050847457627]],[[0.7295597484276729,0.27044025157232704]],[[0.8148148148148148,0.18518518518518517]],[[0.6410256410256411,0.358974358974359]],[[0.33766233766233766,0.6623376623376623]],[[0.1793372319688109,0.8206627680311891]],[[0.10507246376811594,0.894927536231884]],[[0.15196078431372548,0.8480392156862745]],[[0.07758620689655173,0.9224137931034483]],[[0.26582278481012656,0.7341772151898734]],[[0.31176470588235294,0.6882352941176471]],[[0.14925373134328357,0.8507462686567164]]]},{"feature":[15,4,3,-2,-2,3,-2,-2,17,-2,10,-2,-2],"threshold":[1.1349999904632568,10.099999904632568,0.5,-2.0,-2.0,0.5,-2.0,-2.0,169.51499938964844,-2.0,54.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,-1,11,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,10,-1,12,-1,-1],"value":[[[0.27099841521394613,0.7290015847860539]],[[0.4276094276094276,0.5723905723905723]],[[0.5490716180371353,0.4509283819628647]],[[0.4,0.6]],[[0.6066176470588235,0.39338235294117646]],[[0.21658986175115208,0.783410138248848]],[[0.11702127659574468,0.8829787234042553]],[[0.2926829268292683,0.7073170731707317]],[[0.1317365269461078,0.8682634730538922]],[[0.30201342281879195,0.697986577181208]],[[0.08285163776493257,0.9171483622350675]],[[0.21875,0.78125]],[[0.05200945626477541,0.9479905437352246]]]},{"feature":[12,10,4,-2,-2,15,-2,-2,16,-2,6,-2,-2],"threshold":[0.9050000011920929,46.5,3.450000047683716,-2.0,-2.0,1.1050000190734863,-2.0,-2.0,8.700000286102295,-2.0,0.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,-1,11,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,10,-1,12,-1,-1],"value":[[[0.2836767036450079,0.716323296354992]],[[0.4852686308492201,0.5147313691507799]],[[0.6440677966101694,0.3559322033898305]],[[0.7841726618705036,0.2158273381294964]],[[0.5192307692307693,0.4807692307692308]],[[0.3191489361702128,0.6808510638297872]],[[0.4854368932038835,0.5145631067961165]],[[0.22346368715083798,0.776536312849162]],[[0.11386861313868613,0.8861313868613139]],[[0.2441860465116279,0.7558139534883721]],[[0.09515859766277128,0.9048414023372288]],[[0.15028901734104047,0.8497109826589595]],[[0.07276995305164319,0.9272300469483568]]]},{"feature":[3,12,4,-2,-2,17,-2,-2,12,2,-2,-2,13,-2,-2],"threshold":[0.5,1.3199999928474426,11.449999809265137,-2.0,-2.0,4519.985107421875,-2.0,-2.0,0.9600000083446503,0.5,-2.0,-2.0,3.649999976158142,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.2622820919175911,0.7377179080824089]],[[0.1518987341772152,0.8481012658227848]],[[0.23443223443223443,0.7655677655677655]],[[0.32065217391304346,0.6793478260869565]],[[0.056179775280898875,0.9438202247191011]],[[0.03980099502487562,0.9601990049751243]],[[0.06315789473684211,0.9368421052631579]],[[0.018867924528301886,0.9811320754716981]],[[0.3286802030456853,0.6713197969543148]],[[0.5586034912718204,0.44139650872817954]],[[0.6857142857142857,0.3142857142857143]],[[0.358974358974359,0.6410256410256411]],[[0.09043927648578812,0.9095607235142119]],[[0.060810810810810814,0.9391891891891891]],[[0.18681318681318682,0.8131868131868132]]]},{"feature":[17,13,10,-2,-2,12,-2,-2,2,15,-2,-2,13,-2,-2],"threshold":[1280.760009765625,3.715000033378601,43.5,-2.0,-2.0,0.5649999976158142,-2.0,-2.0,0.5,1.125,-2.0,-2.0,3.784999966621399,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.27812995245641836,0.7218700475435816]],[[0.39147286821705424,0.6085271317829457]],[[0.2204968944099379,0.7795031055900621]],[[0.4036697247706422,0.5963302752293578]],[[0.1267605633802817,0.8732394366197183]],[[0.6752577319587629,0.3247422680412371]],[[0.8160919540229885,0.1839080459770115]],[[0.5607476635514018,0.4392523364485981]],[[0.19973190348525469,0.8002680965147453]],[[0.3333333333333333,0.6666666666666666]],[[0.5135135135135135,0.4864864864864865]],[[0.10344827586206896,0.896551724137931]],[[0.15145985401459855,0.8485401459854015]],[[0.07852193995381063,0.9214780600461894]],[[0.4260869565217391,0.5739130434782609]]]},{"feature":[16,15,-2,-2,2,10,-2,-2,12,-2,-2],"threshold":[6.110000133514404,1.125,-2.0,-2.0,0.5,79.5,-2.0,-2.0,1.1150000095367432,-2.0,-2.0],"children_left":[1,2,-1,-1,5,6,-1,-1,9,-1,-1],"children_right":[4,3,-1,-1,8,7,-1,-1,10,-1,-1],"value":[[[0.28922345483359746,0.7107765451664025]],[[0.510989010989011,0.489010989010989]],[[0.6530612244897959,0.3469387755102041]],[[0.34523809523809523,0.6547619047619048]],[[0.2518518518518518,0.7481481481481481]],[[0.38972809667673713,0.6102719033232629]],[[0.46184738955823296,0.5381526104417671]],[[0.17073170731707318,0.8292682926829268]],[[0.1909212283044059,0.8090787716955942]],[[0.3523809523809524,0.6476190476190476]],[[0.07373271889400922,0.9262672811059908]]]},{"feature":[12,2,4,-2,-2,10,-2,-2,15,17,-2,-2,11,-2,-2],"threshold":[0.9600000083446503,0.5,4.599999904632568,-2.0,-2.0,46.5,-2.0,-2.0,1.125,4589.485107421875,-2.0,-2.0,39.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.25990491283676703,0.7400950871632329]],[[0.43842364532019706,0.5615763546798029]],[[0.6,0.4]],[[0.6994219653179191,0.30057803468208094]],[[0.452991452991453,0.5470085470085471]],[[0.29153605015673983,0.7084639498432602]],[[0.4230769230769231,0.5769230769230769]],[[0.22790697674418606,0.772093023255814]],[[0.09341500765696784,0.9065849923430321]],[[0.1910828025477707,0.8089171974522293]],[[0.2222222222222222,0.7777777777777778]],[[0.15789473684210525,0.8421052631578947]],[[0.0625,0.9375]],[[0.09649122807017543,0.9035087719298246]],[[0.033582089552238806,0.9664179104477612]]]},{"feature":[10,15,13,-2,-2,12,-2,-2,15,16,-2,-2,13,-2,-2],"threshold":[53.5,1.1050000190734863,3.784999966621399,-2.0,-2.0,1.0099999904632568,-2.0,-2.0,1.1050000190734863,471.4700012207031,-2.0,-2.0,3.6750000715255737,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.27179080824088747,0.7282091917591125]],[[0.4989059080962801,0.5010940919037199]],[[0.6808510638297872,0.3191489361702128]],[[0.4567901234567901,0.5432098765432098]],[[0.7987012987012987,0.2012987012987013]],[[0.3063063063063063,0.6936936936936937]],[[0.4351145038167939,0.5648854961832062]],[[0.12087912087912088,0.8791208791208791]],[[0.14285714285714285,0.8571428571428571]],[[0.26146788990825687,0.7385321100917431]],[[0.17582417582417584,0.8241758241758241]],[[0.3228346456692913,0.6771653543307087]],[[0.09880749574105621,0.9011925042589438]],[[0.06739130434782609,0.9326086956521739]],[[0.2125984251968504,0.7874015748031497]]]},{"feature":[10,14,-2,-2,2,12,-2,-2,13,-2,-2],"threshold":[30.5,179.5,-2.0,-2.0,0.5,0.925000011920929,-2.0,-2.0,3.740000009536743,-2.0,-2.0],"children_left":[1,2,-1,-1,5,6,-1,-1,9,-1,-1],"children_right":[4,3,-1,-1,8,7,-1,-1,10,-1,-1],"value":[[[0.27099841521394613,0.7290015847860539]],[[0.6483516483516484,0.3516483516483517]],[[0.7184466019417476,0.2815533980582524]],[[0.5569620253164557,0.4430379746835443]],[[0.2074074074074074,0.7925925925925926]],[[0.38408304498269896,0.615916955017301]],[[0.5714285714285714,0.42857142857142855]],[[0.1484375,0.8515625]],[[0.14285714285714285,0.8571428571428571]],[[0.08914100486223663,0.9108589951377634]],[[0.3333333333333333,0.6666666666666666]]]},{"feature":[10,2,-2,-2,15,2,-2,-2,12,-2,-2],"threshold":[36.5,0.5,-2.0,-2.0,1.125,0.5,-2.0,-2.0,1.1299999952316284,-2.0,-2.0],"children_left":[1,2,-1,-1,5,6,-1,-1,9,-1,-1],"children_right":[4,3,-1,-1,8,7,-1,-1,10,-1,-1],"value":[[[0.2733755942947702,0.7266244057052298]],[[0.6275303643724697,0.3724696356275304]],[[0.6867469879518072,0.3132530120481928]],[[0.5061728395061729,0.49382716049382713]],[[0.18719211822660098,0.812807881773399]],[[0.3168044077134986,0.6831955922865014]],[[0.45081967213114754,0.5491803278688525]],[[0.24896265560165975,0.7510373443983402]],[[0.11503067484662577,0.8849693251533742]],[[0.1935483870967742,0.8064516129032258]],[[0.06683168316831684,0.9331683168316832]]]},{"feature":[2,10,-2,17,-2,-2,5,17,-2,-2,13,-2,-2],"threshold":[0.5,32.5,-2.0,689.5,-2.0,-2.0,0.5,3942.0,-2.0,-2.0,3.715000033378601,-2.0,-2.0],"children_left":[1,2,-1,4,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,3,-1,5,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.2765451664025357,0.7234548335974643]],[[0.4236111111111111,0.5763888888888888]],[[0.7074829931972789,0.2925170068027211]],[[0.2771929824561403,0.7228070175438597]],[[0.4,0.6]],[[0.18787878787878787,0.8121212121212121]],[[0.2,0.8]],[[0.10743801652892562,0.8925619834710744]],[[0.14285714285714285,0.8571428571428571]],[[0.058823529411764705,0.9411764705882353]],[[0.23809523809523808,0.7619047619047619]],[[0.16511627906976745,0.8348837209302326]],[[0.43670886075949367,0.5632911392405063]]]},{"feature":[14,12,13,-2,-2,1,-2,-2,4,10,-2,-2,12,-2,-2],"threshold":[131.5,1.3250000476837158,3.7200000286102295,-2.0,-2.0,59.5,-2.0,-2.0,4.950000047683716,39.5,-2.0,-2.0,1.0750000476837158,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.2733755942947702,0.7266244057052298]],[[0.1649048625792812,0.8350951374207188]],[[0.3148936170212766,0.6851063829787234]],[[0.1986754966887417,0.8013245033112583]],[[0.5238095238095238,0.47619047619047616]],[[0.01680672268907563,0.9831932773109243]],[[0.007518796992481203,0.9924812030075187]],[[0.02857142857142857,0.9714285714285714]],[[0.33840304182509506,0.6615969581749049]],[[0.6524064171122995,0.34759358288770054]],[[0.7777777777777778,0.2222222222222222]],[[0.4810126582278481,0.5189873417721519]],[[0.24086378737541528,0.7591362126245847]],[[0.3774193548387097,0.6225806451612903]],[[0.0958904109589041,0.9041095890410958]]]},{"feature":[10,16,-2,-2,17,4,-2,-2,-2],"threshold":[38.5,49.25,-2.0,-2.0,61101.0,12.550000190734863,-2.0,-2.0,-2.0],"children_left":[1,2,-1,-1,5,6,-1,-1,-1],"children_right":[4,3,-1,-1,8,7,-1,-1,-1],"value":[[[0.26465927099841524,0.7353407290015848]],[[0.556420233463035,0.44357976653696496]],[[0.6831683168316832,0.31683168316831684]],[[0.47435897435897434,0.5256410256410257]],[[0.1900497512437811,0.8099502487562189]],[[0.20942982456140352,0.7905701754385965]],[[0.24480712166172106,0.755192878338279]],[[0.1092436974789916,0.8907563025210085]],[[0.0,1.0]]]},{"feature":[2,13,11,-2,-2,-2,13,1,-2,-2,16,-2,-2],"threshold":[0.5,3.9950000047683716,45.5,-2.0,-2.0,-2.0,3.715000033378601,66.5,-2.0,-2.0,1722.2849731445312,-2.0,-2.0],"children_left":[1,2,3,-1,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,5,4,-1,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.2630744849445325,0.7369255150554676]],[[0.43680709534368073,0.5631929046563193]],[[0.32326283987915405,0.676737160120846]],[[0.3786008230452675,0.6213991769547325]],[[0.17045454545454544,0.8295454545454546]],[[0.75,0.25]],[[0.16646115906288533,0.8335388409371147]],[[0.09630818619582665,0.9036918138041734]],[[0.05470459518599562,0.9452954048140044]],[[0.21084337349397592,0.7891566265060241]],[[0.39893617021276595,0.601063829787234]],[[0.52,0.48]],[[0.26136363636363635,0.7386363636363636]]]},{"feature":[2,13,10,-2,-2,13,-2,-2,10,-2,17,-2,-2],"threshold":[0.5,3.8950001001358032,37.5,-2.0,-2.0,4.169999837875366,-2.0,-2.0,50.5,-2.0,15829.52978515625,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,-1,11,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,10,-1,12,-1,-1],"value":[[[0.29556259904912835,0.7044374009508716]],[[0.505800464037123,0.494199535962877]],[[0.3484848484848485,0.6515151515151515]],[[0.5925925925925926,0.4074074074074074]],[[0.24043715846994534,0.7595628415300546]],[[0.7544910179640718,0.24550898203592814]],[[0.6410256410256411,0.358974358974359]],[[0.8539325842696629,0.14606741573033707]],[[0.1865222623345367,0.8134777376654633]],[[0.3609467455621302,0.6390532544378699]],[[0.1419939577039275,0.8580060422960725]],[[0.10874704491725769,0.8912529550827423]],[[0.200836820083682,0.799163179916318]]]},{"feature":[13,13,4,-2,-2,12,-2,-2,4,14,-2,-2,15,-2,-2],"threshold":[3.7050000429153442,3.1950000524520874,9.599999904632568,-2.0,-2.0,1.1349999904632568,-2.0,-2.0,4.599999904632568,150.5,-2.0,-2.0,1.1050000190734863,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.286053882725832,0.713946117274168]],[[0.15681544028950542,0.8431845597104946]],[[0.0830945558739255,0.9169054441260746]],[[0.12903225806451613,0.8709677419354839]],[[0.03067484662576687,0.9693251533742331]],[[0.21041666666666667,0.7895833333333333]],[[0.3531746031746032,0.6468253968253969]],[[0.05263157894736842,0.9473684210526315]],[[0.5334872979214781,0.4665127020785219]],[[0.7142857142857143,0.2857142857142857]],[[0.5842696629213483,0.4157303370786517]],[[0.822429906542056,0.17757009345794392]],[[0.38396624472573837,0.6160337552742616]],[[0.48905109489051096,0.5109489051094891]],[[0.24,0.76]]]},{"feature":[3,15,12,-2,-2,11,-2,-2,2,17,-2,-2,15,-2,-2],"threshold":[0.5,1.1349999904632568,0.7849999964237213,-2.0,-2.0,29.5,-2.0,-2.0,0.5,1307.9299926757812,-2.0,-2.0,1.1449999809265137,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.2868462757527734,0.7131537242472267]],[[0.17543859649122806,0.8245614035087719]],[[0.3064516129032258,0.6935483870967742]],[[0.37349397590361444,0.6265060240963856]],[[0.2524271844660194,0.7475728155339806]],[[0.08518518518518518,0.9148148148148149]],[[0.14102564102564102,0.8589743589743589]],[[0.0625,0.9375]],[[0.34987593052109184,0.6501240694789082]],[[0.5052631578947369,0.49473684210526314]],[[0.5964125560538116,0.40358744394618834]],[[0.37579617834394907,0.6242038216560509]],[[0.2112676056338028,0.7887323943661971]],[[0.4144736842105263,0.5855263157894737]],[[0.09854014598540146,0.9014598540145985]]]},{"feature":[12,12,-2,3,-2,-2,14,10,-2,-2,11,-2,-2],"threshold":[1.0049999952316284,0.4050000011920929,-2.0,0.5,-2.0,-2.0,144.5,51.5,-2.0,-2.0,48.5,-2.0,-2.0],"children_left":[1,2,-1,4,-1,-1,7,8,-1,-1,11,-1,-1],"children_right":[6,3,-1,5,-1,-1,10,9,-1,-1,12,-1,-1],"value":[[[0.2900158478605388,0.7099841521394612]],[[0.4423676012461059,0.557632398753894]],[[0.7931034482758621,0.20689655172413793]],[[0.38738738738738737,0.6126126126126126]],[[0.23469387755102042,0.7653061224489796]],[[0.47075208913649025,0.5292479108635098]],[[0.13225806451612904,0.867741935483871]],[[0.07479224376731301,0.925207756232687]],[[0.14772727272727273,0.8522727272727273]],[[0.05128205128205128,0.9487179487179487]],[[0.21235521235521235,0.7876447876447876]],[[0.27450980392156865,0.7254901960784313]],[[0.12264150943396226,0.8773584905660378]]]},{"feature":[15,10,4,-2,-2,4,-2,-2,11,14,-2,-2,1,-2,-2],"threshold":[1.1150000095367432,38.5,3.549999952316284,-2.0,-2.0,7.5,-2.0,-2.0,44.5,116.5,-2.0,-2.0,63.5,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.25990491283676703,0.7400950871632329]],[[0.43737574552683894,0.562624254473161]],[[0.6964285714285714,0.30357142857142855]],[[0.7816091954022989,0.21839080459770116]],[[0.6049382716049383,0.3950617283950617]],[[0.3074626865671642,0.6925373134328359]],[[0.5038759689922481,0.49612403100775193]],[[0.18446601941747573,0.8155339805825242]],[[0.1422924901185771,0.857707509881423]],[[0.1927437641723356,0.8072562358276644]],[[0.10362694300518134,0.8963730569948186]],[[0.2620967741935484,0.7379032258064516]],[[0.07232704402515723,0.9276729559748428]],[[0.04888888888888889,0.9511111111111111]],[[0.12903225806451613,0.8709677419354839]]]},{"feature":[17,4,12,-2,-2,12,-2,-2,2,12,-2,-2,17,-2,-2],"threshold":[1181.2449951171875,6.400000095367432,1.125,-2.0,-2.0,0.8549999892711639,-2.0,-2.0,0.5,0.8199999928474426,-2.0,-2.0,2846.0,-2.0,-2.0],"children_left":[1,2,3,-1,-1,6,-1,-1,9,10,-1,-1,13,-1,-1],"children_right":[8,5,4,-1,-1,7,-1,-1,12,11,-1,-1,14,-1,-1],"value":[[[0.25277337559429475,0.7472266244057052]],[[0.3691983122362869,0.630801687763713]],[[0.5333333333333333,0.4666666666666667]],[[0.6767676767676768,0.32323232323232326]],[[0.1388888888888889,0.8611111111111112]],[[0.15196078431372548,0.8480392156862745]],[[0.27848101265822783,0.7215189873417721]],[[0.072,0.928]],[[0.18274111675126903,0.817258883248731]],[[0.35175879396984927,0.6482412060301508]],[[0.5480769230769231,0.4519230769230769]],[[0.1368421052631579,0.8631578947368421]],[[0.12563667232597622,0.8743633276740238]],[[0.04716981132075472,0.9528301886792453]],[[0.14285714285714285,0.8571428571428571]]]}]};

function predictTree(tree, features) {
    let node = 0;
    while (tree.children_left[node] !== -1) {
        const featureIdx = tree.feature[node];
        const threshold = tree.threshold[node];
        node = features[featureIdx] <= threshold ? tree.children_left[node] : tree.children_right[node];
    }
    const value = tree.value[node][0];
    return value[1] / (value[0] + value[1]);
}

function predictRF(features) {
    return MODEL.trees.reduce((sum, tree) => sum + predictTree(tree, features), 0) / MODEL.trees.length;
}

function validateForm() {
    const fields = ['age', 'largest_size', 'AST', 'ALT', 'TB', 'Alb', 'PLT', 'INR', 'AFP', 'PIVKA'];
    let valid = true;
    fields.forEach(field => {
        const el = document.getElementById(field);
        if (!el.value) { el.style.borderColor = '#fc8181'; valid = false; }
        else { el.style.borderColor = '#e2e8f0'; }
    });
    return valid;
}

function calculateMHSS() {
    if (!validateForm()) { alert('Please fill in all required fields.'); return; }
    const features = [
        parseInt(document.getElementById('male').value),
        parseFloat(document.getElementById('age').value),
        document.getElementById('PVT').checked ? 1 : 0,
        document.getElementById('EHS').checked ? 1 : 0,
        parseFloat(document.getElementById('largest_size').value),
        document.getElementById('multiple').checked ? 1 : 0,
        document.getElementById('HBV').checked ? 1 : 0,
        document.getElementById('HCV').checked ? 1 : 0,
        document.getElementById('Alc').checked ? 1 : 0,
        document.getElementById('MASLD').checked ? 1 : 0,
        parseFloat(document.getElementById('AST').value),
        parseFloat(document.getElementById('ALT').value),
        parseFloat(document.getElementById('TB').value),
        parseFloat(document.getElementById('Alb').value),
        parseFloat(document.getElementById('PLT').value),
        parseFloat(document.getElementById('INR').value),
        parseFloat(document.getElementById('AFP').value),
        parseFloat(document.getElementById('PIVKA').value)
    ];
    const mhss = predictRF(features);
    const isHighRisk = mhss >= MODEL.optimal_threshold;
    const riskGroup = isHighRisk ? 'high' : 'low';
    
    document.getElementById('results').classList.add('show');
    document.getElementById('score-display').className = 'score-display ' + (isHighRisk ? 'risk-high' : 'risk-low');
    document.getElementById('score-value').textContent = mhss.toFixed(3);
    document.getElementById('score-bar-fill').style.width = (mhss * 100) + '%';
    
    const badge = document.getElementById('risk-badge');
    badge.className = 'risk-badge ' + (isHighRisk ? 'risk-high' : 'risk-low');
    badge.innerHTML = isHighRisk ? '‚ö†Ô∏è HIGH RISK' : '‚úÖ LOW RISK';
    
    // HR info
    document.getElementById('hr-info').innerHTML = isHighRisk ?
        '<strong>High MHSS group hazard ratios:</strong> HD (HR=3.25, 95% CI 2.53-4.18), VB (HR=4.90, 95% CI 3.05-7.87), OS (HR=2.21, 95% CI 1.78-2.75)' :
        '<strong>Low MHSS group:</strong> Reference group with significantly lower risk of HD, VB, and better OS';
    
    const probs = MODEL.outcome_probabilities[riskGroup];
    setProb('decom-3m', probs['3m_decom'], 'risk');
    setProb('decom-6m', probs['6m_decom'], 'risk');
    setProb('decom-12m', probs['12m_decom'], 'risk');
    setProb('varix-3m', probs['3m_varix'], 'risk');
    setProb('varix-6m', probs['6m_varix'], 'risk');
    setProb('varix-12m', probs['12m_varix'], 'risk');
    setProb('os-3m', probs['3m_os'], 'survival');
    setProb('os-6m', probs['6m_os'], 'survival');
    setProb('os-12m', probs['12m_os'], 'survival');
    
    document.getElementById('interpretation-text').innerHTML = isHighRisk ?
        '<strong>High MHSS (‚â•0.72)</strong>: Elevated risk of portal hypertension complications.<br>‚Ä¢ Consider careful evaluation before bevacizumab-containing regimens<br>‚Ä¢ Endoscopic surveillance for varices recommended<br>‚Ä¢ Closer monitoring for hepatic decompensation' :
        '<strong>Low MHSS (<0.72)</strong>: Lower risk of portal hypertension complications.<br>‚Ä¢ Atezolizumab-bevacizumab may provide survival benefit<br>‚Ä¢ Routine endoscopy may be safely omitted in select cases<br>‚Ä¢ Standard monitoring protocols may be sufficient';
    
    document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function setProb(id, prob, type) {
    const el = document.getElementById(id);
    el.textContent = (prob * 100).toFixed(1) + '%';
    el.className = 'outcome-prob';
    if (type === 'risk') {
        el.classList.add(prob < 0.15 ? 'prob-low' : prob < 0.40 ? 'prob-mid' : 'prob-high');
    } else {
        el.classList.add(prob >= 0.60 ? 'prob-os-high' : prob >= 0.40 ? 'prob-os-mid' : 'prob-os-low');
    }
}

function resetForm() {
    document.querySelectorAll('input[type="number"]').forEach(el => { el.value = ''; el.style.borderColor = '#e2e8f0'; });
    document.querySelectorAll('input[type="checkbox"]').forEach(el => { el.checked = false; el.parentElement.classList.remove('checked'); });
    document.getElementById('male').value = '1';
    document.getElementById('results').classList.remove('show');
}
</script>
</body>
</html>